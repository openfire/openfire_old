function datepickr(id,userConfig){function build(nodeName,attributes,content){var element;nodeName in buildCache||(buildCache[nodeName]=document.createElement(nodeName)),element=buildCache[nodeName].cloneNode(!1);if(attributes!=null)for(var attribute in attributes)element[attribute]=attributes[attribute];return content!=null&&(typeof content=="object"?element.appendChild(content):element.innerHTML=content),element}function monthToStr(date,full){return full==1?months[date]:months[date].length>3?months[date].substring(0,3):months[date]}function formatDate(milliseconds){var formattedDate="",dateObj=new Date(milliseconds),format={d:function(){var day=format.j();return day<10?"0"+day:day},D:function(){return weekdays[format.w()].substring(0,3)},j:function(){return dateObj.getDate()},l:function(){return weekdays[format.w()]+"day"},S:function(){return suffix[format.j()]||"th"},w:function(){return dateObj.getDay()},F:function(){return monthToStr(format.n(),!0)},m:function(){var month=format.n()+1;return month<10?"0"+month:month},M:function(){return monthToStr(format.n(),!1)},n:function(){return dateObj.getMonth()},Y:function(){return dateObj.getFullYear()},y:function(){return format.Y().substring(2,4)}},formatPieces=config.dateFormat.split("");for(i=0,x=formatPieces.length;i<x;i++)formattedDate+=format[formatPieces[i]]?format[formatPieces[i]]():formatPieces[i];return formattedDate}function handleMonthClick(){currentMonthView<0&&(currentYearView--,currentMonthView=11),currentMonthView>11&&(currentYearView++,currentMonthView=0),month.innerHTML=get.month.string(config.fullCurrentMonth)+" "+currentYearView;while(body.hasChildNodes())body.removeChild(body.lastChild);return body.appendChild(buildCalendar()),bindDayLinks(),!1}function bindMonthLinks(){prevMonth.onclick=function(){return currentMonthView--,handleMonthClick()},nextMonth.onclick=function(){return currentMonthView++,handleMonthClick()}}function bindDayLinks(){var days=body.getElementsByTagName("a");for(i=0,x=days.length;i<x;i++)days[i].onclick=function(){return element.value=formatDate((new Date(currentYearView,currentMonthView,this.innerHTML)).getTime()),close(),!1}}function buildWeekdays(){var html=document.createDocumentFragment();for(i=0,x=weekdays.length;i<x;i++)html.appendChild(build("th",{},weekdays[i].substring(0,2)));return html}function buildCalendar(){var firstOfMonth=(new Date(currentYearView,currentMonthView,1)).getDay(),numDays=get.month.numDays(),dayCount=0,html=document.createDocumentFragment(),row=build("tr");for(i=1;i<=firstOfMonth;i++)row.appendChild(build("td",{},"&nbsp;")),dayCount++;for(i=1;i<=numDays;i++)dayCount==7&&(html.appendChild(row),row=build("tr"),dayCount=0),row.appendChild(build("td",{className:i==get.current.day()&&currentMonthView==get.current.month.integer()&&currentYearView==get.current.year()?"today":""},build("a",{href:"javascript:void(0)"},i))),dayCount++;for(i=1;i<=7-dayCount;i++)row.appendChild(build("td",{},"&nbsp;"));return html.appendChild(row),html}function open(){document.onclick=function(e){e=e||window.event;var target=e.target||e.srcElement,parentNode=target.parentNode;if(target!=element&&parentNode!=container)while(parentNode!=container){parentNode=parentNode.parentNode;if(parentNode==null){close();break}}},bindDayLinks(),container.style.display="block"}function close(){document.onclick=null,container.style.display="none"}function initialise(userConfig){if(userConfig)for(var key in userConfig)config.hasOwnProperty(key)&&(config[key]=userConfig[key]);var inputLeft=inputTop=0,obj=element;if(obj.offsetParent)do inputLeft+=obj.offsetLeft,inputTop+=obj.offsetTop;while(obj=obj.offsetParent);container=build("div",{className:"calendar"}),container.style.cssText="display: none; position: absolute; top: "+(inputTop+element.offsetHeight)+"px; left: "+inputLeft+"px; z-index: 9999;";var months=build("div",{className:"months"});prevMonth=build("span",{className:"prev-month"},build("a",{href:"#"},"&lt;")),nextMonth=build("span",{className:"next-month"},build("a",{href:"#"},"&gt;")),month=build("span",{className:"current-month"},get.month.string(config.fullCurrentMonth)+" "+currentYearView),months.appendChild(prevMonth),months.appendChild(nextMonth),months.appendChild(month);var calendar=build("table",{},build("thead",{},build("tr",{className:"weekdays"},buildWeekdays())));body=build("tbody",{},buildCalendar()),calendar.appendChild(body),container.appendChild(months),container.appendChild(calendar),document.body.appendChild(container),bindMonthLinks(),element.onfocus=open}var config={fullCurrentMonth:!0,dateFormat:"F jS, Y"},currentDate=new Date,get={current:{year:function(){return currentDate.getFullYear()},month:{integer:function(){return currentDate.getMonth()},string:function(full){var date=currentDate.getMonth();return monthToStr(date,full)}},day:function(){return currentDate.getDate()}},month:{integer:function(){return currentMonthView},string:function(full){var date=currentMonthView;return monthToStr(date,full)},numDays:function(){return get.month.integer()==1&&!(currentYearView&3)&&(currentYearView%100||!(currentYearView%400))?29:daysInMonth[get.month.integer()]}}},weekdays=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],suffix={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},element,container,body,month,prevMonth,nextMonth,currentYearView=get.current.year(),currentMonthView=get.current.month.integer(),i,x,buildCache=[];return function(){element=document.getElementById(id),initialise(userConfig)}()};