{% extends "layout/security.html" %}

{% block content %}

	{% block loginsplash %}
	<div id='splash' class="rounded-big center-all splash">

		<div id="login_wrapper" data-federated="{%- if federated -%}true{%- else -%}false{%- endif -%}" data-csrf="{{ encrypt(security.session.get('sid', '__DEV__')) }}">
			{% include "snippets/login_box.html" with context %}
		</div><!-- end #login_wrapper -->

	</div><!-- end #splash -->
	{% endblock %}

{% endblock %}

{% block postsouth %}
	<script>
		_.ready(function () {
			// # openfire logon # //
			var i, l, button,
				buttons = document.getElementsByClassName("authprovider");
			for (i = 0, l = buttons.length; i < l; i++) {
				button = buttons[i];
				button.addEventListener("click", function (e) {
					var provider = e.target,
						disabled = provider.getAttribute('disabled'),
						location = provider.getAttribute('data-action');

					e.preventDefault();
					e.stopPropagation();

					if (disabled !== 'disabled') { window.location.href = location; }
				}, false);
			};
		});
	</script>
{% endblock postsouth %}